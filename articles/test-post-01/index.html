<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width"><meta property="og:title" content="an autodidact's thoughts"><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:8080/articles/test-post-01/"><meta property="og:site_name" content="an autodidact's thoughts"><!--meta(property='og:image', content='http://ia.media-imdb.com/rock.jpg')--><!--meta(property='fb:admins', content='USER_ID')--><meta property="og:description" content="thougts by mnmly"><title>Demo Post No1 -
an autodidact's thoughts</title><link rel="alternate" href="http://localhost:8080/feed.xml" type="application/rss+xml" title="an autodidact who needs output"><link rel="stylesheet" href="/css/normalize.css"><link rel="stylesheet" href="/css/github.css"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/mobile.css"><script src="/js/libs/require.js" data-main="/js/main.js"></script><script>if( /:8080/.test( document.location.href ) ){
  require(['main']);
} else{
  require(['main-built']);
}

</script></head><body class="article"><div id="top-header"><?xml version="1.0" encoding="utf-8"?>
<!-- Generator: Adobe Illustrator 15.1.0, SVG Export Plug-In . SVG Version: 6.00 Build 0)  -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="15.198px" height="14.157px" viewBox="0 0 15.198 14.157" enable-background="new 0 0 15.198 14.157" xml:space="preserve">
<g>
	<rect y="3.047" fill="#FFFFFF" width="1.9" height="8.125"/>
	<rect x="3.325" y="3.047" fill="#FFFFFF" width="1.9" height="8.125"/>
	<rect x="6.649" y="3.047" fill="#FFFFFF" width="1.899" height="8.125"/>
	<rect x="9.974" fill="#FFFFFF" width="1.9" height="11.172"/>
	<rect x="13.298" y="3.047" fill="#FFFFFF" width="1.9" height="11.11"/>
</g>
</svg>
<div class="inner"><h5>Demo Post No1</h5></div></div><header><div class="inner"></div></header><div id="content"><div class="fade-pane"></div><article class="post"><header><h2 class="title">Demo Post No1</h2></header><aside class="meta"><time datetime="Wed May 02 2012 12:00:00 GMT-0500 (CDT)">May. 2nd, 2012</time></aside><div class="article-container"><section class="body-text"><p>今回は<code>require.js</code>を使って<code>AMD</code>の説明をしていきたいと思います。

</p>
<h3>AMDって？</h3>
<p><a href="http://wiki.commonjs.org/wiki/Modules/AsynchronousDefinition">CommonJS Wiki</a>より引用すると:

</p>
<blockquote>
<p>The Asynchronous Module Definition API specifies a mechanism for defining modules such that the module and its dependencies can be asynchronously loaded. This is particularly well suited for the browser environment where synchronous loading of modules incurs performance, usability, debugging, and cross-domain access problems. 

</p>
</blockquote>
<p>つまり簡単にいえば、<strong>依存関係のあるモジュール(ファイル)をうまく管理する仕組み</strong>みたいなものです。

</p>
<h3>使い方</h3>
<p>まずモジュールの定義の方法

</p>
<div class="wrap">
  <div class='handle-wrapper'>
    <button class="handle" title="Click to toggle between CoffeeScript & JavaScript"></button>
  </div>
  <pre><code class="coffeescript">define ->

  <span class="keyword">class</span> Person

    _state =
      STOP: <span class="string">"stop"</span>
      RUN: <span class="string">"run"</span>
      WALK: <span class="string">"walk"</span>

    constructor: (@state = <span class="keyword">null</span>)->


      @state = _state.STOP unless @checkState(@state)

      console.log <span class="string">"App init"</span>

      run: ->
        @state = _state.RUN

      walk: ->
        @state = _state.WALK

      checkState: (stateName)->
        <span class="keyword">for</span> key, val of _state
          <span class="keyword">if</span> stateName is val
            <span class="keyword">return</span> yes
        <span class="keyword">return</span> no</code></pre>
  <pre style="display:none;"><code class='javascript'>define(<span class="keyword">function</span>() {
  <span class="keyword">var</span> Person;
  <span class="keyword">return</span> Person = (<span class="keyword">function</span>() {
    <span class="keyword">var</span> _state;

    Person.name = <span class="string">'Person'</span>;

    _state = {
      STOP: <span class="string">"stop"</span>,
      RUN: <span class="string">"run"</span>,
      WALK: <span class="string">"walk"</span>
    };

    <span class="keyword">function</span> Person(state) {
      <span class="keyword">this</span>.state = state != <span class="keyword">null</span> ? state : <span class="keyword">null</span>;
      <span class="keyword">if</span> (!<span class="keyword">this</span>.checkState(<span class="keyword">this</span>.state)) {
        <span class="keyword">this</span>.state = _state.STOP;
      }
      console.log(<span class="string">"App init"</span>);
      ({
        run: <span class="keyword">function</span>() {
          <span class="keyword">return</span> <span class="keyword">this</span>.state = _state.RUN;
        },
        walk: <span class="keyword">function</span>() {
          <span class="keyword">return</span> <span class="keyword">this</span>.state = _state.WALK;
        },
        checkState: <span class="keyword">function</span>(stateName) {
          <span class="keyword">var</span> key, val;
          <span class="keyword">for</span> (key in _state) {
            val = _state[key];
            <span class="keyword">if</span> (stateName === val) {
              <span class="keyword">return</span> <span class="keyword">true</span>;
            }
          }
          <span class="keyword">return</span> <span class="keyword">false</span>;
        }
      });
    }

    <span class="keyword">return</span> Person;

  })();
});
</code></pre>
</div>
<p>このモジュールを使うには、

</p>
<div class='error'>Error: Parse error on line 4: Unexpected 'INDENT'</div><pre><code class="coffeescript">
    <span class="keyword">require</span> [<span class="string">'person'</span>], (Person)->

      runner = <span class="keyword">new</span> Person(<span class="string">'run'</span>)

       console.log runner.state <span class="comment"># => run</span></code></pre>
</section><footer><div class="share"><svg version="1.1" id="share" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="5720px" height="2871.9px" viewBox="-2081.571 -641.771 5720 2871.9" enable-background="new -2081.571 -641.771 5720 2871.9" space="preserve">
<path d="M1323,1533L869,363l-70-47h-27l-67,47L250,1533c-6.667,19.334-5.833,38.501,2.5,57.501s21.833,31.833,40.5,38.5
  c5.333,2.666,14.333,4,27,4c34,0,56.333-15.667,67-47L410,1529h373l381,0.001l22,57c10.667,31.334,33.333,47,68,47
  c12,0,20.667-1.334,26-4c19.334-6.666,33.167-19.666,41.5-39C1329.834,1570.667,1330.334,1551.667,1323,1533z M1135,1455L856,1455
  L1057,1256L1135,1455z M1028,1180l-67,66l-127-125l123-123L1028,1180z M922,931l-139,137L643,931H922z M910,1299l-127,127l-127-127
  l127-127L910,1299z M901,857H672l115-297L901,857z M732,1121l-127,125l-62-59l72-183L732,1121z M709,1455H439l75-195L709,1455z"></path>
<path d="M881,220c0-26-9.167-48.166-27.5-66.5C835.167,135.167,813,126,787,126s-48.167,9.168-66.5,27.5
  C702.167,171.833,693,194,693,220s9.167,48.168,27.5,66.5C738.833,304.833,761,314,787,314s48.167-9.166,66.5-27.5
  C871.833,268.167,881,246,881,220z"></path>
<g>
  <path d="M1481,281c-2.666-128-48.333-235.666-137-323l-64,65c72.667,69.334,109,157.334,109,264c0,104-36.333,192.334-109,264.999
    L1342,615C1432,525,1478.334,413.668,1481,281z"></path>
  <path d="M1217,285c0-77.332-31.333-146.666-94-208l-60,61c44,40.668,66,92,66,154c0,57.333-20,105.667-60,144.999l58,57
    C1187,434,1217,364.333,1217,285z"></path>
  <path d="M500,441c-44-40.666-65.667-92.666-65-156c0-54.666,19.667-103,59-145l-57-57c-60,66.668-90.333,137-91,211
    c0.667,77.334,31.667,146,93,206L500,441z"></path>
  <path d="M283,556c-74-70.666-109.333-158.666-106-264c-2.667-104,32.667-193,106-267l-61-59C132,54.667,85.333,165.333,82,298
    c3.333,128,49.333,235,138,321L283,556z"></path>
</g>
</svg>

<span class="seduce-text">Did you like it?</span><ul class="social"><li class="g"><div data-size="medium" data-annotation="inline" data-width="100" class="socialite googleplus"></div></li><li class="t"><a href="https://twitter.com/share" data-via="mnmly" data-lang="en" class="socialite twitter"></a></li><li class="f"><div data-send="false" data-layout="button_count" data-width="60" data-show-faces="false" rel="nofollow" target="_blank" class="socialite facebook"></div></li></ul></div></footer></div></article></div><div id="fb-root"></div></body></html>